{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{useTheme}from\"@material-ui/core/styles\";import{BarChart,CartesianGrid,Bar,XAxis,YAxis,Label,ResponsiveContainer}from\"recharts\";import{startOfHour,parseISO,format}from\"date-fns\";import{i18n}from\"../../translate/i18n\";import Title from\"./Title\";import useTickets from\"../../hooks/useTickets\";const Chart=()=>{const theme=useTheme();const date=useRef(new Date().toISOString());const{tickets}=useTickets({date:date.current});const[chartData,setChartData]=useState([{time:\"08:00\",amount:0},{time:\"09:00\",amount:0},{time:\"10:00\",amount:0},{time:\"11:00\",amount:0},{time:\"12:00\",amount:0},{time:\"13:00\",amount:0},{time:\"14:00\",amount:0},{time:\"15:00\",amount:0},{time:\"16:00\",amount:0},{time:\"17:00\",amount:0},{time:\"18:00\",amount:0},{time:\"19:00\",amount:0}]);useEffect(()=>{setChartData(prevState=>{let aux=[...prevState];aux.forEach(a=>{tickets.forEach(ticket=>{format(startOfHour(parseISO(ticket.createdAt)),\"HH:mm\")===a.time&&a.amount++;});});return aux;});},[tickets]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Title,null,\"\".concat(i18n.t(\"dashboard.charts.perDay.title\")).concat(tickets.length)),/*#__PURE__*/React.createElement(ResponsiveContainer,null,/*#__PURE__*/React.createElement(BarChart,{data:chartData,barSize:40,width:730,height:250,margin:{top:16,right:16,bottom:0,left:24}},/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(XAxis,{dataKey:\"time\",stroke:theme.palette.text.secondary}),/*#__PURE__*/React.createElement(YAxis,{type:\"number\",allowDecimals:false,stroke:theme.palette.text.secondary},/*#__PURE__*/React.createElement(Label,{angle:270,position:\"left\",style:{textAnchor:\"middle\",fill:theme.palette.text.primary}},\"Tickets\")),/*#__PURE__*/React.createElement(Bar,{dataKey:\"amount\",fill:theme.palette.primary.main}))));};export default Chart;","map":{"version":3,"names":["React","useState","useEffect","useRef","useTheme","BarChart","CartesianGrid","Bar","XAxis","YAxis","Label","ResponsiveContainer","startOfHour","parseISO","format","i18n","Title","useTickets","Chart","theme","date","Date","toISOString","tickets","current","chartData","setChartData","time","amount","prevState","aux","forEach","a","ticket","createdAt","createElement","Fragment","concat","t","length","data","barSize","width","height","margin","top","right","bottom","left","strokeDasharray","dataKey","stroke","palette","text","secondary","type","allowDecimals","angle","position","style","textAnchor","fill","primary","main"],"sources":["/home/user/whaticket-free/frontend/src/pages/Dashboard/Chart.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport {\n\tBarChart,\n\tCartesianGrid,\n\tBar,\n\tXAxis,\n\tYAxis,\n\tLabel,\n\tResponsiveContainer,\n} from \"recharts\";\nimport { startOfHour, parseISO, format } from \"date-fns\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport Title from \"./Title\";\nimport useTickets from \"../../hooks/useTickets\";\n\nconst Chart = () => {\n\tconst theme = useTheme();\n\n\tconst date = useRef(new Date().toISOString());\n\tconst { tickets } = useTickets({ date: date.current });\n\n\tconst [chartData, setChartData] = useState([\n\t\t{ time: \"08:00\", amount: 0 },\n\t\t{ time: \"09:00\", amount: 0 },\n\t\t{ time: \"10:00\", amount: 0 },\n\t\t{ time: \"11:00\", amount: 0 },\n\t\t{ time: \"12:00\", amount: 0 },\n\t\t{ time: \"13:00\", amount: 0 },\n\t\t{ time: \"14:00\", amount: 0 },\n\t\t{ time: \"15:00\", amount: 0 },\n\t\t{ time: \"16:00\", amount: 0 },\n\t\t{ time: \"17:00\", amount: 0 },\n\t\t{ time: \"18:00\", amount: 0 },\n\t\t{ time: \"19:00\", amount: 0 },\n\t]);\n\n\tuseEffect(() => {\n\t\tsetChartData(prevState => {\n\t\t\tlet aux = [...prevState];\n\n\t\t\taux.forEach(a => {\n\t\t\t\ttickets.forEach(ticket => {\n\t\t\t\t\tformat(startOfHour(parseISO(ticket.createdAt)), \"HH:mm\") === a.time &&\n\t\t\t\t\t\ta.amount++;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn aux;\n\t\t});\n\t}, [tickets]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Title>{`${i18n.t(\"dashboard.charts.perDay.title\")}${\n\t\t\t\ttickets.length\n\t\t\t}`}</Title>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<BarChart\n\t\t\t\t\tdata={chartData}\n\t\t\t\t\tbarSize={40}\n\t\t\t\t\twidth={730}\n\t\t\t\t\theight={250}\n\t\t\t\t\tmargin={{\n\t\t\t\t\t\ttop: 16,\n\t\t\t\t\t\tright: 16,\n\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\tleft: 24,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\n\t\t\t\t\t<XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\n\t\t\t\t\t<YAxis\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tallowDecimals={false}\n\t\t\t\t\t\tstroke={theme.palette.text.secondary}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Label\n\t\t\t\t\t\t\tangle={270}\n\t\t\t\t\t\t\tposition=\"left\"\n\t\t\t\t\t\t\tstyle={{ textAnchor: \"middle\", fill: theme.palette.text.primary }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tTickets\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t</YAxis>\n\t\t\t\t\t<Bar dataKey=\"amount\" fill={theme.palette.primary.main} />\n\t\t\t\t</BarChart>\n\t\t\t</ResponsiveContainer>\n\t\t</React.Fragment>\n\t);\n};\n\nexport default Chart;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,QAAQ,KAAQ,0BAA0B,CACnD,OACCC,QAAQ,CACRC,aAAa,CACbC,GAAG,CACHC,KAAK,CACLC,KAAK,CACLC,KAAK,CACLC,mBAAmB,KACb,UAAU,CACjB,OAASC,WAAW,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,UAAU,CAExD,OAASC,IAAI,KAAQ,sBAAsB,CAE3C,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,UAAU,KAAM,wBAAwB,CAE/C,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,KAAK,CAAGf,QAAQ,CAAC,CAAC,CAExB,KAAM,CAAAgB,IAAI,CAAGjB,MAAM,CAAC,GAAI,CAAAkB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC,CAC7C,KAAM,CAAEC,OAAQ,CAAC,CAAGN,UAAU,CAAC,CAAEG,IAAI,CAAEA,IAAI,CAACI,OAAQ,CAAC,CAAC,CAEtD,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGzB,QAAQ,CAAC,CAC1C,CAAE0B,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAED,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,CAAE,CAAC,CAC5B,CAAC,CAEF1B,SAAS,CAAC,IAAM,CACfwB,YAAY,CAACG,SAAS,EAAI,CACzB,GAAI,CAAAC,GAAG,CAAG,CAAC,GAAGD,SAAS,CAAC,CAExBC,GAAG,CAACC,OAAO,CAACC,CAAC,EAAI,CAChBT,OAAO,CAACQ,OAAO,CAACE,MAAM,EAAI,CACzBnB,MAAM,CAACF,WAAW,CAACC,QAAQ,CAACoB,MAAM,CAACC,SAAS,CAAC,CAAC,CAAE,OAAO,CAAC,GAAKF,CAAC,CAACL,IAAI,EAClEK,CAAC,CAACJ,MAAM,EAAE,CACZ,CAAC,CAAC,CACH,CAAC,CAAC,CAEF,MAAO,CAAAE,GAAG,CACX,CAAC,CAAC,CACH,CAAC,CAAE,CAACP,OAAO,CAAC,CAAC,CAEb,mBACCvB,KAAA,CAAAmC,aAAA,CAACnC,KAAK,CAACoC,QAAQ,mBACdpC,KAAA,CAAAmC,aAAA,CAACnB,KAAK,SAAAqB,MAAA,CAAKtB,IAAI,CAACuB,CAAC,CAAC,+BAA+B,CAAC,EAAAD,MAAA,CACjDd,OAAO,CAACgB,MAAM,CACL,CAAC,cACXvC,KAAA,CAAAmC,aAAA,CAACxB,mBAAmB,mBACnBX,KAAA,CAAAmC,aAAA,CAAC9B,QAAQ,EACRmC,IAAI,CAAEf,SAAU,CAChBgB,OAAO,CAAE,EAAG,CACZC,KAAK,CAAE,GAAI,CACXC,MAAM,CAAE,GAAI,CACZC,MAAM,CAAE,CACPC,GAAG,CAAE,EAAE,CACPC,KAAK,CAAE,EAAE,CACTC,MAAM,CAAE,CAAC,CACTC,IAAI,CAAE,EACP,CAAE,eAEFhD,KAAA,CAAAmC,aAAA,CAAC7B,aAAa,EAAC2C,eAAe,CAAC,KAAK,CAAE,CAAC,cACvCjD,KAAA,CAAAmC,aAAA,CAAC3B,KAAK,EAAC0C,OAAO,CAAC,MAAM,CAACC,MAAM,CAAEhC,KAAK,CAACiC,OAAO,CAACC,IAAI,CAACC,SAAU,CAAE,CAAC,cAC9DtD,KAAA,CAAAmC,aAAA,CAAC1B,KAAK,EACL8C,IAAI,CAAC,QAAQ,CACbC,aAAa,CAAE,KAAM,CACrBL,MAAM,CAAEhC,KAAK,CAACiC,OAAO,CAACC,IAAI,CAACC,SAAU,eAErCtD,KAAA,CAAAmC,aAAA,CAACzB,KAAK,EACL+C,KAAK,CAAE,GAAI,CACXC,QAAQ,CAAC,MAAM,CACfC,KAAK,CAAE,CAAEC,UAAU,CAAE,QAAQ,CAAEC,IAAI,CAAE1C,KAAK,CAACiC,OAAO,CAACC,IAAI,CAACS,OAAQ,CAAE,EAClE,SAEM,CACD,CAAC,cACR9D,KAAA,CAAAmC,aAAA,CAAC5B,GAAG,EAAC2C,OAAO,CAAC,QAAQ,CAACW,IAAI,CAAE1C,KAAK,CAACiC,OAAO,CAACU,OAAO,CAACC,IAAK,CAAE,CAChD,CACU,CACN,CAAC,CAEnB,CAAC,CAED,cAAe,CAAA7C,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module"}