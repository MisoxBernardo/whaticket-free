{"ast":null,"code":"var _jsxFileName = \"/home/user/whaticket-free/frontend/src/components/TicketOptionsMenu/index.js\";\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport ConfirmationModal from \"../ConfirmationModal\";\nimport TransferTicketModal from \"../TransferTicketModal\";\nimport toastError from \"../../errors/toastError\";\nimport { Can } from \"../Can\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nconst TicketOptionsMenu = ({\n  ticket,\n  menuOpen,\n  handleClose,\n  anchorEl\n}) => {\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\n  const [transferTicketModalOpen, setTransferTicketModalOpen] = useState(false);\n  const isMounted = useRef(true);\n  const {\n    user\n  } = useContext(AuthContext);\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  const handleDeleteTicket = async () => {\n    try {\n      await api.delete(`/tickets/${ticket.id}`);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n  const handleOpenConfirmationModal = e => {\n    setConfirmationOpen(true);\n    handleClose();\n  };\n  const handleOpenTransferModal = e => {\n    setTransferTicketModalOpen(true);\n    handleClose();\n  };\n  const handleCloseTransferTicketModal = () => {\n    if (isMounted.current) {\n      setTransferTicketModalOpen(false);\n    }\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Menu, {\n    id: \"menu-appbar\",\n    anchorEl: anchorEl,\n    getContentAnchorEl: null,\n    anchorOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"right\"\n    },\n    keepMounted: true,\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    open: menuOpen,\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleOpenTransferModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, i18n.t(\"ticketOptionsMenu.transfer\")), /*#__PURE__*/React.createElement(Can, {\n    role: user.profile,\n    perform: \"ticket-options:deleteTicket\",\n    yes: () => /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: handleOpenConfirmationModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, i18n.t(\"ticketOptionsMenu.delete\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(ConfirmationModal, {\n    title: `${i18n.t(\"ticketOptionsMenu.confirmationModal.title\")}${ticket.id} ${i18n.t(\"ticketOptionsMenu.confirmationModal.titleFrom\")} ${ticket.contact.name}?`,\n    open: confirmationOpen,\n    onClose: setConfirmationOpen,\n    onConfirm: handleDeleteTicket,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }\n  }, i18n.t(\"ticketOptionsMenu.confirmationModal.message\")), /*#__PURE__*/React.createElement(TransferTicketModal, {\n    modalOpen: transferTicketModalOpen,\n    onClose: handleCloseTransferTicketModal,\n    ticketid: ticket.id,\n    ticketWhatsappId: ticket.whatsappId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }\n  }));\n};\nexport default TicketOptionsMenu;","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","MenuItem","Menu","i18n","api","ConfirmationModal","TransferTicketModal","toastError","Can","AuthContext","TicketOptionsMenu","ticket","menuOpen","handleClose","anchorEl","confirmationOpen","setConfirmationOpen","transferTicketModalOpen","setTransferTicketModalOpen","isMounted","user","current","handleDeleteTicket","delete","id","err","handleOpenConfirmationModal","e","handleOpenTransferModal","handleCloseTransferTicketModal","createElement","Fragment","getContentAnchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","onClose","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","t","role","profile","perform","yes","title","contact","name","onConfirm","modalOpen","ticketid","ticketWhatsappId","whatsappId"],"sources":["/home/user/whaticket-free/frontend/src/components/TicketOptionsMenu/index.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from \"react\";\n\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport ConfirmationModal from \"../ConfirmationModal\";\nimport TransferTicketModal from \"../TransferTicketModal\";\nimport toastError from \"../../errors/toastError\";\nimport { Can } from \"../Can\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst TicketOptionsMenu = ({ ticket, menuOpen, handleClose, anchorEl }) => {\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\n\tconst [transferTicketModalOpen, setTransferTicketModalOpen] = useState(false);\n\tconst isMounted = useRef(true);\n\tconst { user } = useContext(AuthContext);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, []);\n\n\tconst handleDeleteTicket = async () => {\n\t\ttry {\n\t\t\tawait api.delete(`/tickets/${ticket.id}`);\n\t\t} catch (err) {\n\t\t\ttoastError(err);\n\t\t}\n\t};\n\n\tconst handleOpenConfirmationModal = e => {\n\t\tsetConfirmationOpen(true);\n\t\thandleClose();\n\t};\n\n\tconst handleOpenTransferModal = e => {\n\t\tsetTransferTicketModalOpen(true);\n\t\thandleClose();\n\t};\n\n\tconst handleCloseTransferTicketModal = () => {\n\t\tif (isMounted.current) {\n\t\t\tsetTransferTicketModalOpen(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Menu\n\t\t\t\tid=\"menu-appbar\"\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\tkeepMounted\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\topen={menuOpen}\n\t\t\t\tonClose={handleClose}\n\t\t\t>\n\t\t\t\t<MenuItem onClick={handleOpenTransferModal}>\n\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.transfer\")}\n\t\t\t\t</MenuItem>\n\t\t\t\t<Can\n\t\t\t\t\trole={user.profile}\n\t\t\t\t\tperform=\"ticket-options:deleteTicket\"\n\t\t\t\t\tyes={() => (\n\t\t\t\t\t\t<MenuItem onClick={handleOpenConfirmationModal}>\n\t\t\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.delete\")}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</Menu>\n\t\t\t<ConfirmationModal\n\t\t\t\ttitle={`${i18n.t(\"ticketOptionsMenu.confirmationModal.title\")}${\n\t\t\t\t\tticket.id\n\t\t\t\t} ${i18n.t(\"ticketOptionsMenu.confirmationModal.titleFrom\")} ${\n\t\t\t\t\tticket.contact.name\n\t\t\t\t}?`}\n\t\t\t\topen={confirmationOpen}\n\t\t\t\tonClose={setConfirmationOpen}\n\t\t\t\tonConfirm={handleDeleteTicket}\n\t\t\t>\n\t\t\t\t{i18n.t(\"ticketOptionsMenu.confirmationModal.message\")}\n\t\t\t</ConfirmationModal>\n\t\t\t<TransferTicketModal\n\t\t\t\tmodalOpen={transferTicketModalOpen}\n\t\t\t\tonClose={handleCloseTransferTicketModal}\n\t\t\t\tticketid={ticket.id}\n\t\t\t\tticketWhatsappId={ticket.whatsappId}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default TicketOptionsMenu;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEtE,OAAOC,QAAQ,MAAM,4BAA4B;AACjD,OAAOC,IAAI,MAAM,wBAAwB;AAEzC,SAASC,IAAI,QAAQ,sBAAsB;AAC3C,OAAOC,GAAG,MAAM,oBAAoB;AACpC,OAAOC,iBAAiB,MAAM,sBAAsB;AACpD,OAAOC,mBAAmB,MAAM,wBAAwB;AACxD,OAAOC,UAAU,MAAM,yBAAyB;AAChD,SAASC,GAAG,QAAQ,QAAQ;AAC5B,SAASC,WAAW,QAAQ,gCAAgC;AAE5D,MAAMC,iBAAiB,GAAGA,CAAC;EAAEC,MAAM;EAAEC,QAAQ;EAAEC,WAAW;EAAEC;AAAS,CAAC,KAAK;EAC1E,MAAM,CAACC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACiB,uBAAuB,EAAEC,0BAA0B,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EAC7E,MAAMmB,SAAS,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM;IAAEqB;EAAK,CAAC,GAAGvB,UAAU,CAACY,WAAW,CAAC;EAExCX,SAAS,CAAC,MAAM;IACf,OAAO,MAAM;MACZqB,SAAS,CAACE,OAAO,GAAG,KAAK;IAC1B,CAAC;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI;MACH,MAAMlB,GAAG,CAACmB,MAAM,CAAC,YAAYZ,MAAM,CAACa,EAAE,EAAE,CAAC;IAC1C,CAAC,CAAC,OAAOC,GAAG,EAAE;MACblB,UAAU,CAACkB,GAAG,CAAC;IAChB;EACD,CAAC;EAED,MAAMC,2BAA2B,GAAGC,CAAC,IAAI;IACxCX,mBAAmB,CAAC,IAAI,CAAC;IACzBH,WAAW,CAAC,CAAC;EACd,CAAC;EAED,MAAMe,uBAAuB,GAAGD,CAAC,IAAI;IACpCT,0BAA0B,CAAC,IAAI,CAAC;IAChCL,WAAW,CAAC,CAAC;EACd,CAAC;EAED,MAAMgB,8BAA8B,GAAGA,CAAA,KAAM;IAC5C,IAAIV,SAAS,CAACE,OAAO,EAAE;MACtBH,0BAA0B,CAAC,KAAK,CAAC;IAClC;EACD,CAAC;EAED,oBACCtB,KAAA,CAAAkC,aAAA,CAAAlC,KAAA,CAAAmC,QAAA,qBACCnC,KAAA,CAAAkC,aAAA,CAAC5B,IAAI;IACJsB,EAAE,EAAC,aAAa;IAChBV,QAAQ,EAAEA,QAAS;IACnBkB,kBAAkB,EAAE,IAAK;IACzBC,YAAY,EAAE;MACbC,QAAQ,EAAE,QAAQ;MAClBC,UAAU,EAAE;IACb,CAAE;IACFC,WAAW;IACXC,eAAe,EAAE;MAChBH,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE;IACb,CAAE;IACFG,IAAI,EAAE1B,QAAS;IACf2B,OAAO,EAAE1B,WAAY;IAAA2B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAErBjD,KAAA,CAAAkC,aAAA,CAAC7B,QAAQ;IAAC6C,OAAO,EAAElB,uBAAwB;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACzC1C,IAAI,CAAC4C,CAAC,CAAC,4BAA4B,CAC3B,CAAC,eACXnD,KAAA,CAAAkC,aAAA,CAACtB,GAAG;IACHwC,IAAI,EAAE5B,IAAI,CAAC6B,OAAQ;IACnBC,OAAO,EAAC,6BAA6B;IACrCC,GAAG,EAAEA,CAAA,kBACJvD,KAAA,CAAAkC,aAAA,CAAC7B,QAAQ;MAAC6C,OAAO,EAAEpB,2BAA4B;MAAAc,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAC7C1C,IAAI,CAAC4C,CAAC,CAAC,0BAA0B,CACzB,CACT;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACF,CACI,CAAC,eACPjD,KAAA,CAAAkC,aAAA,CAACzB,iBAAiB;IACjB+C,KAAK,EAAE,GAAGjD,IAAI,CAAC4C,CAAC,CAAC,2CAA2C,CAAC,GAC5DpC,MAAM,CAACa,EAAE,IACNrB,IAAI,CAAC4C,CAAC,CAAC,+CAA+C,CAAC,IAC1DpC,MAAM,CAAC0C,OAAO,CAACC,IAAI,GAChB;IACJhB,IAAI,EAAEvB,gBAAiB;IACvBwB,OAAO,EAAEvB,mBAAoB;IAC7BuC,SAAS,EAAEjC,kBAAmB;IAAAkB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAE7B1C,IAAI,CAAC4C,CAAC,CAAC,6CAA6C,CACnC,CAAC,eACpBnD,KAAA,CAAAkC,aAAA,CAACxB,mBAAmB;IACnBkD,SAAS,EAAEvC,uBAAwB;IACnCsB,OAAO,EAAEV,8BAA+B;IACxC4B,QAAQ,EAAE9C,MAAM,CAACa,EAAG;IACpBkC,gBAAgB,EAAE/C,MAAM,CAACgD,UAAW;IAAAnB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACpC,CACA,CAAC;AAEL,CAAC;AAED,eAAenC,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module"}