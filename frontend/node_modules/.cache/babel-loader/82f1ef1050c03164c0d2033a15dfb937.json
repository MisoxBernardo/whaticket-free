{"ast":null,"code":"import React,{useState,useEffect,useReducer,useContext}from\"react\";import openSocket from\"../../services/socket-io\";import{makeStyles}from\"@material-ui/core/styles\";import List from\"@material-ui/core/List\";import Paper from\"@material-ui/core/Paper\";import TicketListItem from\"../TicketListItem\";import TicketsListSkeleton from\"../TicketsListSkeleton\";import useTickets from\"../../hooks/useTickets\";import{i18n}from\"../../translate/i18n\";import{AuthContext}from\"../../context/Auth/AuthContext\";const useStyles=makeStyles(theme=>({ticketsListWrapper:{position:\"relative\",display:\"flex\",height:\"100%\",flexDirection:\"column\",overflow:\"hidden\",borderTopRightRadius:0,borderBottomRightRadius:0},ticketsList:{flex:1,overflowY:\"scroll\",...theme.scrollbarStyles,borderTop:\"2px solid rgba(0, 0, 0, 0.12)\"},ticketsListHeader:{color:\"rgb(67, 83, 105)\",zIndex:2,backgroundColor:\"white\",borderBottom:\"1px solid rgba(0, 0, 0, 0.12)\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},ticketsCount:{fontWeight:\"normal\",color:\"rgb(104, 121, 146)\",marginLeft:\"8px\",fontSize:\"14px\"},noTicketsText:{textAlign:\"center\",color:\"rgb(104, 121, 146)\",fontSize:\"14px\",lineHeight:\"1.4\"},noTicketsTitle:{textAlign:\"center\",fontSize:\"16px\",fontWeight:\"600\",margin:\"0px\"},noTicketsDiv:{display:\"flex\",height:\"100px\",margin:40,flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"}}));const reducer=(state,action)=>{if(action.type===\"LOAD_TICKETS\"){const newTickets=action.payload;newTickets.forEach(ticket=>{const ticketIndex=state.findIndex(t=>t.id===ticket.id);if(ticketIndex!==-1){state[ticketIndex]=ticket;if(ticket.unreadMessages>0){state.unshift(state.splice(ticketIndex,1)[0]);}}else{state.push(ticket);}});return[...state];}if(action.type===\"RESET_UNREAD\"){const ticketId=action.payload;const ticketIndex=state.findIndex(t=>t.id===ticketId);if(ticketIndex!==-1){state[ticketIndex].unreadMessages=0;}return[...state];}if(action.type===\"UPDATE_TICKET\"){const ticket=action.payload;const ticketIndex=state.findIndex(t=>t.id===ticket.id);if(ticketIndex!==-1){state[ticketIndex]=ticket;}else{state.unshift(ticket);}return[...state];}if(action.type===\"UPDATE_TICKET_UNREAD_MESSAGES\"){const ticket=action.payload;const ticketIndex=state.findIndex(t=>t.id===ticket.id);if(ticketIndex!==-1){state[ticketIndex]=ticket;state.unshift(state.splice(ticketIndex,1)[0]);}else{state.unshift(ticket);}return[...state];}if(action.type===\"UPDATE_TICKET_CONTACT\"){const contact=action.payload;const ticketIndex=state.findIndex(t=>t.contactId===contact.id);if(ticketIndex!==-1){state[ticketIndex].contact=contact;}return[...state];}if(action.type===\"DELETE_TICKET\"){const ticketId=action.payload;const ticketIndex=state.findIndex(t=>t.id===ticketId);if(ticketIndex!==-1){state.splice(ticketIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};const TicketsList=props=>{const{status,searchParam,showAll,selectedQueueIds,updateCount,style,tags}=props;const classes=useStyles();const[pageNumber,setPageNumber]=useState(1);const[ticketsList,dispatch]=useReducer(reducer,[]);const{user}=useContext(AuthContext);const{profile,queues}=user;useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[status,searchParam,dispatch,showAll,selectedQueueIds,tags]);const{tickets,hasMore,loading}=useTickets({pageNumber,searchParam,status,showAll,tags:JSON.stringify(tags),queueIds:JSON.stringify(selectedQueueIds)});useEffect(()=>{const queueIds=queues.map(q=>q.id);const filteredTickets=tickets.filter(t=>queueIds.indexOf(t.queueId)>-1);if(profile===\"user\"){dispatch({type:\"LOAD_TICKETS\",payload:filteredTickets});}else{dispatch({type:\"LOAD_TICKETS\",payload:tickets});}},[tickets,status,searchParam,queues,profile]);useEffect(()=>{const socket=openSocket();const shouldUpdateTicket=ticket=>(!ticket.userId||ticket.userId===(user===null||user===void 0?void 0:user.id)||showAll)&&(!ticket.queueId||selectedQueueIds.indexOf(ticket.queueId)>-1);const notBelongsToUserQueues=ticket=>ticket.queueId&&selectedQueueIds.indexOf(ticket.queueId)===-1;socket.on(\"ready\",()=>{if(status){socket.emit(\"joinTickets\",status);}else{socket.emit(\"joinNotification\");}});socket.on(\"ticket\",data=>{if(data.action===\"updateUnread\"){dispatch({type:\"RESET_UNREAD\",payload:data.ticketId});}if(data.action===\"update\"&&shouldUpdateTicket(data.ticket)){dispatch({type:\"UPDATE_TICKET\",payload:data.ticket});}if(data.action===\"update\"&&notBelongsToUserQueues(data.ticket)){dispatch({type:\"DELETE_TICKET\",payload:data.ticket.id});}if(data.action===\"delete\"){dispatch({type:\"DELETE_TICKET\",payload:data.ticketId});}});socket.on(\"appMessage\",data=>{if(data.action===\"create\"&&shouldUpdateTicket(data.ticket)){dispatch({type:\"UPDATE_TICKET_UNREAD_MESSAGES\",payload:data.ticket});}});socket.on(\"contact\",data=>{if(data.action===\"update\"){dispatch({type:\"UPDATE_TICKET_CONTACT\",payload:data.contact});}});return()=>{socket.disconnect();};},[status,showAll,user,selectedQueueIds]);useEffect(()=>{if(typeof updateCount===\"function\"){updateCount(ticketsList.length);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[ticketsList]);const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};return/*#__PURE__*/React.createElement(Paper,{className:classes.ticketsListWrapper,style:style},/*#__PURE__*/React.createElement(Paper,{square:true,name:\"closed\",elevation:0,className:classes.ticketsList,onScroll:handleScroll},/*#__PURE__*/React.createElement(List,{style:{paddingTop:0}},ticketsList.length===0&&!loading?/*#__PURE__*/React.createElement(\"div\",{className:classes.noTicketsDiv},/*#__PURE__*/React.createElement(\"span\",{className:classes.noTicketsTitle},i18n.t(\"ticketsList.noTicketsTitle\")),/*#__PURE__*/React.createElement(\"p\",{className:classes.noTicketsText},i18n.t(\"ticketsList.noTicketsMessage\"))):/*#__PURE__*/React.createElement(React.Fragment,null,ticketsList.map(ticket=>/*#__PURE__*/React.createElement(TicketListItem,{ticket:ticket,key:ticket.id}))),loading&&/*#__PURE__*/React.createElement(TicketsListSkeleton,null))));};export default TicketsList;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","openSocket","makeStyles","List","Paper","TicketListItem","TicketsListSkeleton","useTickets","i18n","AuthContext","useStyles","theme","ticketsListWrapper","position","display","height","flexDirection","overflow","borderTopRightRadius","borderBottomRightRadius","ticketsList","flex","overflowY","scrollbarStyles","borderTop","ticketsListHeader","color","zIndex","backgroundColor","borderBottom","alignItems","justifyContent","ticketsCount","fontWeight","marginLeft","fontSize","noTicketsText","textAlign","lineHeight","noTicketsTitle","margin","noTicketsDiv","reducer","state","action","type","newTickets","payload","forEach","ticket","ticketIndex","findIndex","t","id","unreadMessages","unshift","splice","push","ticketId","contact","contactId","TicketsList","props","status","searchParam","showAll","selectedQueueIds","updateCount","style","tags","classes","pageNumber","setPageNumber","dispatch","user","profile","queues","tickets","hasMore","loading","JSON","stringify","queueIds","map","q","filteredTickets","filter","indexOf","queueId","socket","shouldUpdateTicket","userId","notBelongsToUserQueues","on","emit","data","disconnect","length","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","createElement","className","square","name","elevation","onScroll","paddingTop","Fragment","key"],"sources":["/home/user/whaticket-free/frontend/src/components/TicketsList/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport openSocket from \"../../services/socket-io\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport Paper from \"@material-ui/core/Paper\";\n\nimport TicketListItem from \"../TicketListItem\";\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\n\nimport useTickets from \"../../hooks/useTickets\";\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  ticketsListWrapper: {\n    position: \"relative\",\n    display: \"flex\",\n    height: \"100%\",\n    flexDirection: \"column\",\n    overflow: \"hidden\",\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n  },\n\n  ticketsList: {\n    flex: 1,\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n    borderTop: \"2px solid rgba(0, 0, 0, 0.12)\",\n  },\n\n  ticketsListHeader: {\n    color: \"rgb(67, 83, 105)\",\n    zIndex: 2,\n    backgroundColor: \"white\",\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n\n  ticketsCount: {\n    fontWeight: \"normal\",\n    color: \"rgb(104, 121, 146)\",\n    marginLeft: \"8px\",\n    fontSize: \"14px\",\n  },\n\n  noTicketsText: {\n    textAlign: \"center\",\n    color: \"rgb(104, 121, 146)\",\n    fontSize: \"14px\",\n    lineHeight: \"1.4\",\n  },\n\n  noTicketsTitle: {\n    textAlign: \"center\",\n    fontSize: \"16px\",\n    fontWeight: \"600\",\n    margin: \"0px\",\n  },\n\n  noTicketsDiv: {\n    display: \"flex\",\n    height: \"100px\",\n    margin: 40,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_TICKETS\") {\n    const newTickets = action.payload;\n\n    newTickets.forEach((ticket) => {\n      const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n      if (ticketIndex !== -1) {\n        state[ticketIndex] = ticket;\n        if (ticket.unreadMessages > 0) {\n          state.unshift(state.splice(ticketIndex, 1)[0]);\n        }\n      } else {\n        state.push(ticket);\n      }\n    });\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET_UNREAD\") {\n    const ticketId = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].unreadMessages = 0;\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET\") {\n    const ticket = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n    } else {\n      state.unshift(ticket);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\n    const ticket = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n      state.unshift(state.splice(ticketIndex, 1)[0]);\n    } else {\n      state.unshift(ticket);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET_CONTACT\") {\n    const contact = action.payload;\n    const ticketIndex = state.findIndex((t) => t.contactId === contact.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].contact = contact;\n    }\n    return [...state];\n  }\n\n  if (action.type === \"DELETE_TICKET\") {\n    const ticketId = action.payload;\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state.splice(ticketIndex, 1);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst TicketsList = (props) => {\n  const {\n    status,\n    searchParam,\n    showAll,\n    selectedQueueIds,\n    updateCount,\n    style,\n    tags,\n  } = props;\n  const classes = useStyles();\n  const [pageNumber, setPageNumber] = useState(1);\n  const [ticketsList, dispatch] = useReducer(reducer, []);\n  const { user } = useContext(AuthContext);\n\tconst { profile, queues } = user;\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [status, searchParam, dispatch, showAll, selectedQueueIds, tags]);\n\n  const { tickets, hasMore, loading } = useTickets({\n    pageNumber,\n    searchParam,\n    status,\n    showAll,\n    tags: JSON.stringify(tags),\n    queueIds: JSON.stringify(selectedQueueIds),\n  });\n\n\tuseEffect(() => {\n\t\tconst queueIds = queues.map((q) => q.id);\n\t\tconst filteredTickets = tickets.filter((t) => queueIds.indexOf(t.queueId) > -1);\n\n\t\tif (profile === \"user\") {\n\t\t\tdispatch({ type: \"LOAD_TICKETS\", payload: filteredTickets });\n\t\t} else {\n\t\t\tdispatch({ type: \"LOAD_TICKETS\", payload: tickets });\n\t\t}\n\t}, [tickets, status, searchParam, queues, profile]);\n\n  useEffect(() => {\n    const socket = openSocket();\n\n    const shouldUpdateTicket = (ticket) =>\n      (!ticket.userId || ticket.userId === user?.id || showAll) &&\n      (!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\n\n    const notBelongsToUserQueues = (ticket) =>\n      ticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\n\n    socket.on(\"ready\", () => {\n      if (status) {\n        socket.emit(\"joinTickets\", status);\n      } else {\n        socket.emit(\"joinNotification\");\n      }\n    });\n\n    socket.on(\"ticket\", (data) => {\n      if (data.action === \"updateUnread\") {\n        dispatch({\n          type: \"RESET_UNREAD\",\n          payload: data.ticketId,\n        });\n      }\n\n      if (data.action === \"update\" && shouldUpdateTicket(data.ticket)) {\n        dispatch({\n          type: \"UPDATE_TICKET\",\n          payload: data.ticket,\n        });\n      }\n\n      if (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticket.id });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticketId });\n      }\n    });\n\n    socket.on(\"appMessage\", (data) => {\n      if (data.action === \"create\" && shouldUpdateTicket(data.ticket)) {\n        dispatch({\n          type: \"UPDATE_TICKET_UNREAD_MESSAGES\",\n          payload: data.ticket,\n        });\n      }\n    });\n\n    socket.on(\"contact\", (data) => {\n      if (data.action === \"update\") {\n        dispatch({\n          type: \"UPDATE_TICKET_CONTACT\",\n          payload: data.contact,\n        });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [status, showAll, user, selectedQueueIds]);\n\n  useEffect(() => {\n    if (typeof updateCount === \"function\") {\n      updateCount(ticketsList.length);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ticketsList]);\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  return (\n    <Paper className={classes.ticketsListWrapper} style={style}>\n      <Paper\n        square\n        name=\"closed\"\n        elevation={0}\n        className={classes.ticketsList}\n        onScroll={handleScroll}\n      >\n        <List style={{ paddingTop: 0 }}>\n          {ticketsList.length === 0 && !loading ? (\n            <div className={classes.noTicketsDiv}>\n              <span className={classes.noTicketsTitle}>\n                {i18n.t(\"ticketsList.noTicketsTitle\")}\n              </span>\n              <p className={classes.noTicketsText}>\n                {i18n.t(\"ticketsList.noTicketsMessage\")}\n              </p>\n            </div>\n          ) : (\n            <>\n              {ticketsList.map((ticket) => (\n                <TicketListItem ticket={ticket} key={ticket.id} />\n              ))}\n            </>\n          )}\n          {loading && <TicketsListSkeleton />}\n        </List>\n      </Paper>\n    </Paper>\n  );\n};\n\nexport default TicketsList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}