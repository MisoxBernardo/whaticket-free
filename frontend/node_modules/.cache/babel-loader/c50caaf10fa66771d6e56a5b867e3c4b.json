{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{useHistory}from\"react-router-dom\";import toastError from\"../../errors/toastError\";import api from\"../../services/api\";import Avatar from\"@material-ui/core/Avatar\";import Typography from\"@material-ui/core/Typography\";import Grid from\"@material-ui/core/Grid\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Button,Divider}from\"@material-ui/core\";const VcardPreview=_ref=>{let{contact,numbers}=_ref;const history=useHistory();const{user}=useContext(AuthContext);const[selectedContact,setContact]=useState({name:\"\",number:0,profilePicUrl:\"\"});useEffect(()=>{const delayDebounceFn=setTimeout(()=>{const fetchContacts=async()=>{try{let contactObj={name:contact,number:numbers.replace(/\\D/g,\"\"),email:\"\"};const{data}=await api.post(\"/contact\",contactObj);setContact(data);}catch(err){console.log(err);toastError(err);}};fetchContacts();},500);return()=>clearTimeout(delayDebounceFn);},[contact,numbers]);const handleNewChat=async()=>{try{const{data:ticket}=await api.post(\"/tickets\",{contactId:selectedContact.id,userId:user.id,status:\"open\"});history.push(\"/tickets/\".concat(ticket.id));}catch(err){toastError(err);}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{style:{minWidth:\"250px\"}},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:2},/*#__PURE__*/React.createElement(Avatar,{src:selectedContact.profilePicUrl})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:9},/*#__PURE__*/React.createElement(Typography,{style:{marginTop:\"12px\",marginLeft:\"10px\"},variant:\"subtitle1\",color:\"primary\",gutterBottom:true},selectedContact.name)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Button,{fullWidth:true,color:\"primary\",onClick:handleNewChat,disabled:!selectedContact.number},\"Conversar\")))));};export default VcardPreview;","map":{"version":3,"names":["React","useEffect","useState","useContext","useHistory","toastError","api","Avatar","Typography","Grid","AuthContext","Button","Divider","VcardPreview","_ref","contact","numbers","history","user","selectedContact","setContact","name","number","profilePicUrl","delayDebounceFn","setTimeout","fetchContacts","contactObj","replace","email","data","post","err","console","log","clearTimeout","handleNewChat","ticket","contactId","id","userId","status","push","concat","createElement","Fragment","style","minWidth","container","spacing","item","xs","src","marginTop","marginLeft","variant","color","gutterBottom","fullWidth","onClick","disabled"],"sources":["/home/user/whaticket-free/frontend/src/components/VcardPreview/index.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\n\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nimport { Button, Divider, } from \"@material-ui/core\";\n\nconst VcardPreview = ({ contact, numbers }) => {\n    const history = useHistory();\n    const { user } = useContext(AuthContext);\n\n    const [selectedContact, setContact] = useState({\n        name: \"\",\n        number: 0,\n        profilePicUrl: \"\"\n    });\n\n    useEffect(() => {\n        const delayDebounceFn = setTimeout(() => {\n            const fetchContacts = async() => {\n                try {\n                    let contactObj = {\n                        name: contact,\n                        number: numbers.replace(/\\D/g, \"\"),\n                        email: \"\"\n                    }\n                    const { data } = await api.post(\"/contact\", contactObj);\n                    setContact(data)\n\n                } catch (err) {\n                    console.log(err)\n                    toastError(err);\n                }\n            };\n            fetchContacts();\n        }, 500);\n        return () => clearTimeout(delayDebounceFn);\n    }, [contact, numbers]);\n\n    const handleNewChat = async() => {\n        try {\n            const { data: ticket } = await api.post(\"/tickets\", {\n                contactId: selectedContact.id,\n                userId: user.id,\n                status: \"open\",\n            });\n            history.push(`/tickets/${ticket.id}`);\n        } catch (err) {\n            toastError(err);\n        }\n    }\n\n    return (\n\t\t<>\n\t\t\t<div style={{\n\t\t\t\tminWidth: \"250px\",\n\t\t\t}}>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={2}>\n\t\t\t\t\t\t<Avatar src={selectedContact.profilePicUrl} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={9}>\n\t\t\t\t\t\t<Typography style={{ marginTop: \"12px\", marginLeft: \"10px\" }} variant=\"subtitle1\" color=\"primary\" gutterBottom>\n\t\t\t\t\t\t\t{selectedContact.name}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={handleNewChat}\n\t\t\t\t\t\t\tdisabled={!selectedContact.number}\n\t\t\t\t\t\t>Conversar</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</>\n\t);\n\n};\n\nexport default VcardPreview;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}