{"ast":null,"code":"import React,{useState,useEffect,useReducer}from\"react\";import{toast}from\"react-toastify\";import openSocket from\"../../services/socket-io\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import IconButton from\"@material-ui/core/IconButton\";import SearchIcon from\"@material-ui/icons/Search\";import TextField from\"@material-ui/core/TextField\";import InputAdornment from\"@material-ui/core/InputAdornment\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import EditIcon from\"@material-ui/icons/Edit\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import Title from\"../../components/Title\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import UserModal from\"../../components/UserModal\";import ConfirmationModal from\"../../components/ConfirmationModal\";import toastError from\"../../errors/toastError\";const reducer=(state,action)=>{if(action.type===\"LOAD_USERS\"){const users=action.payload;const newUsers=[];users.forEach(user=>{const userIndex=state.findIndex(u=>u.id===user.id);if(userIndex!==-1){state[userIndex]=user;}else{newUsers.push(user);}});return[...state,...newUsers];}if(action.type===\"UPDATE_USERS\"){const user=action.payload;const userIndex=state.findIndex(u=>u.id===user.id);if(userIndex!==-1){state[userIndex]=user;return[...state];}else{return[user,...state];}}if(action.type===\"DELETE_USER\"){const userId=action.payload;const userIndex=state.findIndex(u=>u.id===userId);if(userIndex!==-1){state.splice(userIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};const useStyles=makeStyles(theme=>({mainPaper:{flex:1,padding:theme.spacing(1),overflowY:\"scroll\",...theme.scrollbarStyles}}));const Users=()=>{const classes=useStyles();const[loading,setLoading]=useState(false);const[pageNumber,setPageNumber]=useState(1);const[hasMore,setHasMore]=useState(false);const[selectedUser,setSelectedUser]=useState(null);const[deletingUser,setDeletingUser]=useState(null);const[userModalOpen,setUserModalOpen]=useState(false);const[confirmModalOpen,setConfirmModalOpen]=useState(false);const[searchParam,setSearchParam]=useState(\"\");const[users,dispatch]=useReducer(reducer,[]);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchUsers=async()=>{try{const{data}=await api.get(\"/users/\",{params:{searchParam,pageNumber}});dispatch({type:\"LOAD_USERS\",payload:data.users});setHasMore(data.hasMore);setLoading(false);}catch(err){toastError(err);}};fetchUsers();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam,pageNumber]);useEffect(()=>{const socket=openSocket();socket.on(\"user\",data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_USERS\",payload:data.user});}if(data.action===\"delete\"){dispatch({type:\"DELETE_USER\",payload:+data.userId});}});return()=>{socket.disconnect();};},[]);const handleOpenUserModal=()=>{setSelectedUser(null);setUserModalOpen(true);};const handleCloseUserModal=()=>{setSelectedUser(null);setUserModalOpen(false);};const handleSearch=event=>{setSearchParam(event.target.value.toLowerCase());};const handleEditUser=user=>{setSelectedUser(user);setUserModalOpen(true);};const handleDeleteUser=async userId=>{try{await api.delete(\"/users/\".concat(userId));toast.success(i18n.t(\"users.toasts.deleted\"));}catch(err){toastError(err);}setDeletingUser(null);setSearchParam(\"\");setPageNumber(1);};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};return/*#__PURE__*/React.createElement(MainContainer,null,/*#__PURE__*/React.createElement(ConfirmationModal,{title:deletingUser&&\"\".concat(i18n.t(\"users.confirmationModal.deleteTitle\"),\" \").concat(deletingUser.name,\"?\"),open:confirmModalOpen,onClose:setConfirmModalOpen,onConfirm:()=>handleDeleteUser(deletingUser.id)},i18n.t(\"users.confirmationModal.deleteMessage\")),/*#__PURE__*/React.createElement(UserModal,{open:userModalOpen,onClose:handleCloseUserModal,\"aria-labelledby\":\"form-dialog-title\",userId:selectedUser&&selectedUser.id}),/*#__PURE__*/React.createElement(MainHeader,null,/*#__PURE__*/React.createElement(Title,null,i18n.t(\"users.title\")),/*#__PURE__*/React.createElement(MainHeaderButtonsWrapper,null,/*#__PURE__*/React.createElement(TextField,{placeholder:i18n.t(\"contacts.searchPlaceholder\"),type:\"search\",value:searchParam,onChange:handleSearch,InputProps:{startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},/*#__PURE__*/React.createElement(SearchIcon,{style:{color:\"gray\"}}))}}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenUserModal},i18n.t(\"users.buttons.add\")))),/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll},/*#__PURE__*/React.createElement(Table,{size:\"small\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"users.table.name\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"users.table.email\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"users.table.profile\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"users.table.whatsapp\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"users.table.actions\")))),/*#__PURE__*/React.createElement(TableBody,null,/*#__PURE__*/React.createElement(React.Fragment,null,users.map(user=>{var _user$whatsapp;return/*#__PURE__*/React.createElement(TableRow,{key:user.id},/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},user.name),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},user.email),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},user.profile),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},(_user$whatsapp=user.whatsapp)===null||_user$whatsapp===void 0?void 0:_user$whatsapp.name),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:()=>handleEditUser(user)},/*#__PURE__*/React.createElement(EditIcon,null)),/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:e=>{setConfirmModalOpen(true);setDeletingUser(user);}},/*#__PURE__*/React.createElement(DeleteOutlineIcon,null))));}),loading&&/*#__PURE__*/React.createElement(TableRowSkeleton,{columns:4}))))));};export default Users;","map":{"version":3,"names":["React","useState","useEffect","useReducer","toast","openSocket","makeStyles","Paper","Button","Table","TableBody","TableCell","TableHead","TableRow","IconButton","SearchIcon","TextField","InputAdornment","DeleteOutlineIcon","EditIcon","MainContainer","MainHeader","MainHeaderButtonsWrapper","Title","api","i18n","TableRowSkeleton","UserModal","ConfirmationModal","toastError","reducer","state","action","type","users","payload","newUsers","forEach","user","userIndex","findIndex","u","id","push","userId","splice","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","Users","classes","loading","setLoading","pageNumber","setPageNumber","hasMore","setHasMore","selectedUser","setSelectedUser","deletingUser","setDeletingUser","userModalOpen","setUserModalOpen","confirmModalOpen","setConfirmModalOpen","searchParam","setSearchParam","dispatch","delayDebounceFn","setTimeout","fetchUsers","data","get","params","err","clearTimeout","socket","on","disconnect","handleOpenUserModal","handleCloseUserModal","handleSearch","event","target","value","toLowerCase","handleEditUser","handleDeleteUser","delete","concat","success","t","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","createElement","title","name","open","onClose","onConfirm","placeholder","onChange","InputProps","startAdornment","position","style","color","variant","onClick","className","onScroll","size","align","Fragment","map","_user$whatsapp","key","email","profile","whatsapp","columns"],"sources":["/home/fenix/whaticket-free/frontend/src/pages/Users/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer } from \"react\";\nimport { toast } from \"react-toastify\";\nimport openSocket from \"../../services/socket-io\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\n\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\n\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport Title from \"../../components/Title\";\n\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport UserModal from \"../../components/UserModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport toastError from \"../../errors/toastError\";\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_USERS\") {\n    const users = action.payload;\n    const newUsers = [];\n\n    users.forEach((user) => {\n      const userIndex = state.findIndex((u) => u.id === user.id);\n      if (userIndex !== -1) {\n        state[userIndex] = user;\n      } else {\n        newUsers.push(user);\n      }\n    });\n\n    return [...state, ...newUsers];\n  }\n\n  if (action.type === \"UPDATE_USERS\") {\n    const user = action.payload;\n    const userIndex = state.findIndex((u) => u.id === user.id);\n\n    if (userIndex !== -1) {\n      state[userIndex] = user;\n      return [...state];\n    } else {\n      return [user, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_USER\") {\n    const userId = action.payload;\n\n    const userIndex = state.findIndex((u) => u.id === userId);\n    if (userIndex !== -1) {\n      state.splice(userIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nconst Users = () => {\n  const classes = useStyles();\n\n  const [loading, setLoading] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [deletingUser, setDeletingUser] = useState(null);\n  const [userModalOpen, setUserModalOpen] = useState(false);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [users, dispatch] = useReducer(reducer, []);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchUsers = async () => {\n        try {\n          const { data } = await api.get(\"/users/\", {\n            params: { searchParam, pageNumber },\n          });\n          dispatch({ type: \"LOAD_USERS\", payload: data.users });\n          setHasMore(data.hasMore);\n          setLoading(false);\n        } catch (err) {\n          toastError(err);\n        }\n      };\n      fetchUsers();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchParam, pageNumber]);\n\n  useEffect(() => {\n    const socket = openSocket();\n\n    socket.on(\"user\", (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_USERS\", payload: data.user });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_USER\", payload: +data.userId });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  const handleOpenUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(true);\n  };\n\n  const handleCloseUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(false);\n  };\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n\n  const handleEditUser = (user) => {\n    setSelectedUser(user);\n    setUserModalOpen(true);\n  };\n\n  const handleDeleteUser = async (userId) => {\n    try {\n      await api.delete(`/users/${userId}`);\n      toast.success(i18n.t(\"users.toasts.deleted\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingUser(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          deletingUser &&\n          `${i18n.t(\"users.confirmationModal.deleteTitle\")} ${\n            deletingUser.name\n          }?`\n        }\n        open={confirmModalOpen}\n        onClose={setConfirmModalOpen}\n        onConfirm={() => handleDeleteUser(deletingUser.id)}\n      >\n        {i18n.t(\"users.confirmationModal.deleteMessage\")}\n      </ConfirmationModal>\n      <UserModal\n        open={userModalOpen}\n        onClose={handleCloseUserModal}\n        aria-labelledby=\"form-dialog-title\"\n        userId={selectedUser && selectedUser.id}\n      />\n      <MainHeader>\n        <Title>{i18n.t(\"users.title\")}</Title>\n        <MainHeaderButtonsWrapper>\n          <TextField\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\n            type=\"search\"\n            value={searchParam}\n            onChange={handleSearch}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon style={{ color: \"gray\" }} />\n                </InputAdornment>\n              ),\n            }}\n          />\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleOpenUserModal}\n          >\n            {i18n.t(\"users.buttons.add\")}\n          </Button>\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n      <Paper\n        className={classes.mainPaper}\n        variant=\"outlined\"\n        onScroll={handleScroll}\n      >\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"center\">{i18n.t(\"users.table.name\")}</TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"users.table.email\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"users.table.profile\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"users.table.whatsapp\")}\n              </TableCell>              \n              <TableCell align=\"center\">\n                {i18n.t(\"users.table.actions\")}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            <>\n              {users.map((user) => (\n                <TableRow key={user.id}>\n                  <TableCell align=\"center\">{user.name}</TableCell>\n                  <TableCell align=\"center\">{user.email}</TableCell>\n                  <TableCell align=\"center\">{user.profile}</TableCell>\n                  <TableCell align=\"center\">{user.whatsapp?.name}</TableCell>\n                  <TableCell align=\"center\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleEditUser(user)}\n                    >\n                      <EditIcon />\n                    </IconButton>\n\n                    <IconButton\n                      size=\"small\"\n                      onClick={(e) => {\n                        setConfirmModalOpen(true);\n                        setDeletingUser(user);\n                      }}\n                    >\n                      <DeleteOutlineIcon />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))}\n              {loading && <TableRowSkeleton columns={4} />}\n            </>\n          </TableBody>\n        </Table>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default Users;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}