{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import InputLabel from\"@material-ui/core/InputLabel\";import MenuItem from\"@material-ui/core/MenuItem\";import FormControl from\"@material-ui/core/FormControl\";import Select from\"@material-ui/core/Select\";import toastError from\"../../errors/toastError\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";import{Tooltip,Typography,CircularProgress}from\"@material-ui/core\";import{SignalCellularConnectedNoInternet2Bar,SignalCellularConnectedNoInternet0Bar,SignalCellular4Bar,CropFree}from\"@material-ui/icons\";import{green}from\"@material-ui/core/colors\";const useStyles=makeStyles(theme=>({chips:{display:\"flex\",flexWrap:\"wrap\"},chip:{margin:2}}));const CustomToolTip=_ref=>{let{title,content,children}=_ref;const classes=useStyles();return/*#__PURE__*/React.createElement(Tooltip,{arrow:true,classes:{tooltip:classes.tooltip,popper:classes.tooltipPopper},title:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,color:\"inherit\"},title),content&&/*#__PURE__*/React.createElement(Typography,null,content))},children);};const QueueSelect=_ref2=>{let{selectedQueueIds,onChange}=_ref2;const classes=useStyles();const[queues,setQueues]=useState([]);useEffect(()=>{(async()=>{try{const{data}=await api.get(\"/whatsapp\");const conectionNotDefault=data.filter(conection=>conection.isDefault!==true);setQueues(conectionNotDefault);}catch(err){toastError(err);}})();},[]);const handleChange=e=>{onChange(e.target.value);};const renderStatusToolTips=whatsApp=>{return/*#__PURE__*/React.createElement(\"div\",{className:classes.customTableCell},whatsApp.status===\"DISCONNECTED\"&&/*#__PURE__*/React.createElement(CustomToolTip,{title:i18n.t(\"connections.toolTips.disconnected.title\"),content:i18n.t(\"connections.toolTips.disconnected.content\")},/*#__PURE__*/React.createElement(SignalCellularConnectedNoInternet0Bar,{color:\"secondary\"})),whatsApp.status===\"OPENING\"&&/*#__PURE__*/React.createElement(CircularProgress,{size:24,className:classes.buttonProgress}),whatsApp.status===\"qrcode\"&&/*#__PURE__*/React.createElement(CustomToolTip,{title:i18n.t(\"connections.toolTips.qrcode.title\"),content:i18n.t(\"connections.toolTips.qrcode.content\")},/*#__PURE__*/React.createElement(CropFree,null)),whatsApp.status===\"CONNECTED\"&&/*#__PURE__*/React.createElement(CustomToolTip,{title:i18n.t(\"connections.toolTips.connected.title\")},/*#__PURE__*/React.createElement(SignalCellular4Bar,{style:{color:green[500]}})),(whatsApp.status===\"TIMEOUT\"||whatsApp.status===\"PAIRING\")&&/*#__PURE__*/React.createElement(CustomToolTip,{title:i18n.t(\"connections.toolTips.timeout.title\"),content:i18n.t(\"connections.toolTips.timeout.content\")},/*#__PURE__*/React.createElement(SignalCellularConnectedNoInternet2Bar,{color:\"secondary\"})));};const renderSelect=whatsApp=>{const queue=queues.find(q=>q.id===whatsApp);return queue?/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between'}},queue.name,renderStatusToolTips(queue)):null;};return/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:6}},/*#__PURE__*/React.createElement(FormControl,{fullWidth:true,margin:\"dense\",variant:\"outlined\"},/*#__PURE__*/React.createElement(InputLabel,null,\"Selecione uma conex\\xE3o*\"),/*#__PURE__*/React.createElement(Select// multiple\n,{labelWidth:180,value:selectedQueueIds,onChange:handleChange,MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:selected=>renderSelect(selected)},queues.map(queue=>/*#__PURE__*/React.createElement(MenuItem,{key:queue.id,value:queue.id,style:{display:'flex',alignItems:'center',justifyContent:'space-between'}},queue.name,renderStatusToolTips(queue))))));};export default QueueSelect;","map":{"version":3,"names":["React","useEffect","useState","makeStyles","InputLabel","MenuItem","FormControl","Select","toastError","api","i18n","Tooltip","Typography","CircularProgress","SignalCellularConnectedNoInternet2Bar","SignalCellularConnectedNoInternet0Bar","SignalCellular4Bar","CropFree","green","useStyles","theme","chips","display","flexWrap","chip","margin","CustomToolTip","_ref","title","content","children","classes","createElement","arrow","tooltip","popper","tooltipPopper","Fragment","gutterBottom","color","QueueSelect","_ref2","selectedQueueIds","onChange","queues","setQueues","data","get","conectionNotDefault","filter","conection","isDefault","err","handleChange","e","target","value","renderStatusToolTips","whatsApp","className","customTableCell","status","t","size","buttonProgress","style","renderSelect","queue","find","q","id","alignItems","justifyContent","name","marginTop","fullWidth","variant","labelWidth","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","renderValue","selected","map","key"],"sources":["/home/user/whaticket-free/frontend/src/components/SelectConection/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\n\nimport {\n\tTooltip,\n\tTypography,\n\tCircularProgress,\n} from \"@material-ui/core\";\n\nimport {\n\tSignalCellularConnectedNoInternet2Bar,\n\tSignalCellularConnectedNoInternet0Bar,\n\tSignalCellular4Bar,\n\tCropFree,\n} from \"@material-ui/icons\";\n\nimport { green } from \"@material-ui/core/colors\";\n\nconst useStyles = makeStyles(theme => ({\n\tchips: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\tchip: {\n\t\tmargin: 2,\n\t},\n}));\n\nconst CustomToolTip = ({ title, content, children }) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Tooltip\n\t\t\tarrow\n\t\t\tclasses={{\n\t\t\t\ttooltip: classes.tooltip,\n\t\t\t\tpopper: classes.tooltipPopper,\n\t\t\t}}\n\t\t\ttitle={\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Typography gutterBottom color=\"inherit\">\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{content && <Typography>{content}</Typography>}\n\t\t\t\t</React.Fragment>\n\t\t\t}\n\t\t>\n\t\t\t{children}\n\t\t</Tooltip>\n\t);\n};\n\nconst QueueSelect = ({ selectedQueueIds, onChange }) => {\n\tconst classes = useStyles();\n\tconst [queues, setQueues] = useState([]);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.get(\"/whatsapp\");\n\t\t\t\tconst conectionNotDefault = data.filter(\n\t\t\t\t\tconection => conection.isDefault !== true\n\t\t\t\t);\n\t\t\t\tsetQueues(conectionNotDefault);\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\tconst handleChange = e => {\n\t\tonChange(e.target.value);\n\t};\n\n\tconst renderStatusToolTips = whatsApp => {\n\t\treturn (\n\t\t\t<div className={classes.customTableCell}>\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\n\t\t\t\t\t<CustomToolTip\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.disconnected.title\")}\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.disconnected.content\")}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet0Bar color=\"secondary\" />\n\t\t\t\t\t</CustomToolTip>\n\t\t\t\t)}\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\n\t\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\n\t\t\t\t)}\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\n\t\t\t\t\t<CustomToolTip\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.qrcode.title\")}\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.qrcode.content\")}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CropFree />\n\t\t\t\t\t</CustomToolTip>\n\t\t\t\t)}\n\t\t\t\t{whatsApp.status === \"CONNECTED\" && (\n\t\t\t\t\t<CustomToolTip title={i18n.t(\"connections.toolTips.connected.title\")}>\n\t\t\t\t\t\t<SignalCellular4Bar style={{ color: green[500] }} />\n\t\t\t\t\t</CustomToolTip>\n\t\t\t\t)}\n\t\t\t\t{(whatsApp.status === \"TIMEOUT\" || whatsApp.status === \"PAIRING\") && (\n\t\t\t\t\t<CustomToolTip\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.timeout.title\")}\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.timeout.content\")}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet2Bar color=\"secondary\" />\n\t\t\t\t\t</CustomToolTip>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst renderSelect = whatsApp => {\n\t\tconst queue = queues.find(q => q.id === whatsApp);\n\t\t\n\t\treturn queue ? (\n\t\t\t<div style={{\n\t\t\t\tdisplay: 'flex',\n\t\t\t\talignItems: 'center',\n\t\t\t\tjustifyContent: 'space-between'\n\t\t\t}}>\n\t\t\t\t{queue.name}\n\t\t\t\t{renderStatusToolTips(queue)}\n\t\t\t</div>\n\t\t) : null;\n\t}\n\n\treturn (\n\t\t<div style={{ marginTop: 6 }}>\n\t\t\t<FormControl fullWidth margin=\"dense\" variant=\"outlined\">\n\t\t\t\t<InputLabel>Selecione uma conex√£o*</InputLabel>\n\t\t\t\t<Select\n\t\t\t\t\t// multiple\n\t\t\t\t\tlabelWidth={180}\n\t\t\t\t\tvalue={selectedQueueIds}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t}}\n\t\t\t\t\trenderValue={selected => renderSelect(selected)}\n\t\t\t\t>\n\t\t\t\t\t{queues.map(queue => (\n\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id} style={{\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\tjustifyContent: 'space-between'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{queue.name}\n\t\t\t\t\t\t\t{renderStatusToolTips(queue)}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t))}\n\t\t\t\t</Select>\n\t\t\t</FormControl>\n\t\t</div>\n\t);\n};\n\nexport default QueueSelect;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}