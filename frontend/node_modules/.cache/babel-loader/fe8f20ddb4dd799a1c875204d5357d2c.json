{"ast":null,"code":"import React,{useState,useContext}from\"react\";import MenuItem from\"@material-ui/core/MenuItem\";import{i18n}from\"../../translate/i18n\";import api from\"../../services/api\";import ConfirmationModal from\"../ConfirmationModal\";import{Menu}from\"@material-ui/core\";import{ReplyMessageContext}from\"../../context/ReplyingMessage/ReplyingMessageContext\";import toastError from\"../../errors/toastError\";const MessageOptionsMenu=_ref=>{let{message,menuOpen,handleClose,anchorEl}=_ref;const{setReplyingMessage}=useContext(ReplyMessageContext);const[confirmationOpen,setConfirmationOpen]=useState(false);const handleDeleteMessage=async()=>{try{await api.delete(\"/messages/\".concat(message.id));}catch(err){toastError(err);}};const hanldeReplyMessage=()=>{setReplyingMessage(message);handleClose();};const handleOpenConfirmationModal=e=>{setConfirmationOpen(true);handleClose();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ConfirmationModal,{title:i18n.t(\"messageOptionsMenu.confirmationModal.title\"),open:confirmationOpen,onClose:setConfirmationOpen,onConfirm:handleDeleteMessage},i18n.t(\"messageOptionsMenu.confirmationModal.message\")),/*#__PURE__*/React.createElement(Menu,{anchorEl:anchorEl,getContentAnchorEl:null,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:menuOpen,onClose:handleClose},message.fromMe&&/*#__PURE__*/React.createElement(MenuItem,{onClick:handleOpenConfirmationModal},i18n.t(\"messageOptionsMenu.delete\")),/*#__PURE__*/React.createElement(MenuItem,{onClick:hanldeReplyMessage},i18n.t(\"messageOptionsMenu.reply\"))));};export default MessageOptionsMenu;","map":{"version":3,"names":["React","useState","useContext","MenuItem","i18n","api","ConfirmationModal","Menu","ReplyMessageContext","toastError","MessageOptionsMenu","_ref","message","menuOpen","handleClose","anchorEl","setReplyingMessage","confirmationOpen","setConfirmationOpen","handleDeleteMessage","delete","concat","id","err","hanldeReplyMessage","handleOpenConfirmationModal","e","createElement","Fragment","title","t","open","onClose","onConfirm","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","fromMe","onClick"],"sources":["/home/fenix/whaticket-free/frontend/src/components/MessageOptionsMenu/index.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\n\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport ConfirmationModal from \"../ConfirmationModal\";\nimport { Menu } from \"@material-ui/core\";\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\nimport toastError from \"../../errors/toastError\";\n\nconst MessageOptionsMenu = ({ message, menuOpen, handleClose, anchorEl }) => {\n  const { setReplyingMessage } = useContext(ReplyMessageContext);\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\n\n  const handleDeleteMessage = async () => {\n    try {\n      await api.delete(`/messages/${message.id}`);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const hanldeReplyMessage = () => {\n    setReplyingMessage(message);\n    handleClose();\n  };\n\n  const handleOpenConfirmationModal = (e) => {\n    setConfirmationOpen(true);\n    handleClose();\n  };\n\n  return (\n    <>\n      <ConfirmationModal\n        title={i18n.t(\"messageOptionsMenu.confirmationModal.title\")}\n        open={confirmationOpen}\n        onClose={setConfirmationOpen}\n        onConfirm={handleDeleteMessage}\n      >\n        {i18n.t(\"messageOptionsMenu.confirmationModal.message\")}\n      </ConfirmationModal>\n      <Menu\n        anchorEl={anchorEl}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"right\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"right\",\n        }}\n        open={menuOpen}\n        onClose={handleClose}\n      >\n        {message.fromMe && (\n          <MenuItem onClick={handleOpenConfirmationModal}>\n            {i18n.t(\"messageOptionsMenu.delete\")}\n          </MenuItem>\n        )}\n        <MenuItem onClick={hanldeReplyMessage}>\n          {i18n.t(\"messageOptionsMenu.reply\")}\n        </MenuItem>\n      </Menu>\n    </>\n  );\n};\n\nexport default MessageOptionsMenu;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAEnD,MAAO,CAAAC,QAAQ,KAAM,4BAA4B,CAEjD,OAASC,IAAI,KAAQ,sBAAsB,CAC3C,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,MAAO,CAAAC,iBAAiB,KAAM,sBAAsB,CACpD,OAASC,IAAI,KAAQ,mBAAmB,CACxC,OAASC,mBAAmB,KAAQ,sDAAsD,CAC1F,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAEhD,KAAM,CAAAC,kBAAkB,CAAGC,IAAA,EAAkD,IAAjD,CAAEC,OAAO,CAAEC,QAAQ,CAAEC,WAAW,CAAEC,QAAS,CAAC,CAAAJ,IAAA,CACtE,KAAM,CAAEK,kBAAmB,CAAC,CAAGd,UAAU,CAACM,mBAAmB,CAAC,CAC9D,KAAM,CAACS,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAE/D,KAAM,CAAAkB,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,KAAM,CAAAd,GAAG,CAACe,MAAM,cAAAC,MAAA,CAAcT,OAAO,CAACU,EAAE,CAAE,CAAC,CAC7C,CAAE,MAAOC,GAAG,CAAE,CACZd,UAAU,CAACc,GAAG,CAAC,CACjB,CACF,CAAC,CAED,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/BR,kBAAkB,CAACJ,OAAO,CAAC,CAC3BE,WAAW,CAAC,CAAC,CACf,CAAC,CAED,KAAM,CAAAW,2BAA2B,CAAIC,CAAC,EAAK,CACzCR,mBAAmB,CAAC,IAAI,CAAC,CACzBJ,WAAW,CAAC,CAAC,CACf,CAAC,CAED,mBACEd,KAAA,CAAA2B,aAAA,CAAA3B,KAAA,CAAA4B,QAAA,mBACE5B,KAAA,CAAA2B,aAAA,CAACrB,iBAAiB,EAChBuB,KAAK,CAAEzB,IAAI,CAAC0B,CAAC,CAAC,4CAA4C,CAAE,CAC5DC,IAAI,CAAEd,gBAAiB,CACvBe,OAAO,CAAEd,mBAAoB,CAC7Be,SAAS,CAAEd,mBAAoB,EAE9Bf,IAAI,CAAC0B,CAAC,CAAC,8CAA8C,CACrC,CAAC,cACpB9B,KAAA,CAAA2B,aAAA,CAACpB,IAAI,EACHQ,QAAQ,CAAEA,QAAS,CACnBmB,kBAAkB,CAAE,IAAK,CACzBC,YAAY,CAAE,CACZC,QAAQ,CAAE,QAAQ,CAClBC,UAAU,CAAE,OACd,CAAE,CACFC,eAAe,CAAE,CACfF,QAAQ,CAAE,KAAK,CACfC,UAAU,CAAE,OACd,CAAE,CACFN,IAAI,CAAElB,QAAS,CACfmB,OAAO,CAAElB,WAAY,EAEpBF,OAAO,CAAC2B,MAAM,eACbvC,KAAA,CAAA2B,aAAA,CAACxB,QAAQ,EAACqC,OAAO,CAAEf,2BAA4B,EAC5CrB,IAAI,CAAC0B,CAAC,CAAC,2BAA2B,CAC3B,CACX,cACD9B,KAAA,CAAA2B,aAAA,CAACxB,QAAQ,EAACqC,OAAO,CAAEhB,kBAAmB,EACnCpB,IAAI,CAAC0B,CAAC,CAAC,0BAA0B,CAC1B,CACN,CACN,CAAC,CAEP,CAAC,CAED,cAAe,CAAApB,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module"}