{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import ModalImage from\"react-modal-image\";import api from\"../../services/api\";const useStyles=makeStyles(theme=>({messageMedia:{objectFit:\"cover\",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8}}));const ModalImageCors=_ref=>{let{imageUrl}=_ref;const classes=useStyles();const[fetching,setFetching]=useState(true);const[blobUrl,setBlobUrl]=useState(\"\");useEffect(()=>{if(!imageUrl)return;const fetchImage=async()=>{const{data,headers}=await api.get(imageUrl,{responseType:\"blob\"});const url=window.URL.createObjectURL(new Blob([data],{type:headers[\"content-type\"]}));setBlobUrl(url);setFetching(false);};fetchImage();},[imageUrl]);return/*#__PURE__*/React.createElement(ModalImage,{className:classes.messageMedia,smallSrcSet:fetching?imageUrl:blobUrl,medium:fetching?imageUrl:blobUrl,large:fetching?imageUrl:blobUrl,alt:\"image\"});};export default ModalImageCors;","map":{"version":3,"names":["React","useState","useEffect","makeStyles","ModalImage","api","useStyles","theme","messageMedia","objectFit","width","height","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","ModalImageCors","_ref","imageUrl","classes","fetching","setFetching","blobUrl","setBlobUrl","fetchImage","data","headers","get","responseType","url","window","URL","createObjectURL","Blob","type","createElement","className","smallSrcSet","medium","large","alt"],"sources":["/home/user/whaticket-free/frontend/src/components/ModalImageCors/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport ModalImage from \"react-modal-image\";\nimport api from \"../../services/api\";\n\nconst useStyles = makeStyles(theme => ({\n\tmessageMedia: {\n\t\tobjectFit: \"cover\",\n\t\twidth: 250,\n\t\theight: 200,\n\t\tborderTopLeftRadius: 8,\n\t\tborderTopRightRadius: 8,\n\t\tborderBottomLeftRadius: 8,\n\t\tborderBottomRightRadius: 8,\n\t},\n}));\n\nconst ModalImageCors = ({ imageUrl }) => {\n\tconst classes = useStyles();\n\tconst [fetching, setFetching] = useState(true);\n\tconst [blobUrl, setBlobUrl] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tif (!imageUrl) return;\n\t\tconst fetchImage = async () => {\n\t\t\tconst { data, headers } = await api.get(imageUrl, {\n\t\t\t\tresponseType: \"blob\",\n\t\t\t});\n\t\t\tconst url = window.URL.createObjectURL(\n\t\t\t\tnew Blob([data], { type: headers[\"content-type\"] })\n\t\t\t);\n\t\t\tsetBlobUrl(url);\n\t\t\tsetFetching(false);\n\t\t};\n\t\tfetchImage();\n\t}, [imageUrl]);\n\n\treturn (\n\t\t<ModalImage\n\t\t\tclassName={classes.messageMedia}\n\t\t\tsmallSrcSet={fetching ? imageUrl : blobUrl}\n\t\t\tmedium={fetching ? imageUrl : blobUrl}\n\t\t\tlarge={fetching ? imageUrl : blobUrl}\n\t\t\talt=\"image\"\n\t\t/>\n\t);\n};\n\nexport default ModalImageCors;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,UAAU,KAAQ,0BAA0B,CAErD,MAAO,CAAAC,UAAU,KAAM,mBAAmB,CAC1C,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CAEpC,KAAM,CAAAC,SAAS,CAAGH,UAAU,CAACI,KAAK,GAAK,CACtCC,YAAY,CAAE,CACbC,SAAS,CAAE,OAAO,CAClBC,KAAK,CAAE,GAAG,CACVC,MAAM,CAAE,GAAG,CACXC,mBAAmB,CAAE,CAAC,CACtBC,oBAAoB,CAAE,CAAC,CACvBC,sBAAsB,CAAE,CAAC,CACzBC,uBAAuB,CAAE,CAC1B,CACD,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACnC,KAAM,CAAAE,OAAO,CAAGb,SAAS,CAAC,CAAC,CAC3B,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAE1CC,SAAS,CAAC,IAAM,CACf,GAAI,CAACgB,QAAQ,CAAE,OACf,KAAM,CAAAM,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAG,KAAM,CAAArB,GAAG,CAACsB,GAAG,CAACT,QAAQ,CAAE,CACjDU,YAAY,CAAE,MACf,CAAC,CAAC,CACF,KAAM,CAAAC,GAAG,CAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CACrC,GAAI,CAAAC,IAAI,CAAC,CAACR,IAAI,CAAC,CAAE,CAAES,IAAI,CAAER,OAAO,CAAC,cAAc,CAAE,CAAC,CACnD,CAAC,CACDH,UAAU,CAACM,GAAG,CAAC,CACfR,WAAW,CAAC,KAAK,CAAC,CACnB,CAAC,CACDG,UAAU,CAAC,CAAC,CACb,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEd,mBACClB,KAAA,CAAAmC,aAAA,CAAC/B,UAAU,EACVgC,SAAS,CAAEjB,OAAO,CAACX,YAAa,CAChC6B,WAAW,CAAEjB,QAAQ,CAAGF,QAAQ,CAAGI,OAAQ,CAC3CgB,MAAM,CAAElB,QAAQ,CAAGF,QAAQ,CAAGI,OAAQ,CACtCiB,KAAK,CAAEnB,QAAQ,CAAGF,QAAQ,CAAGI,OAAQ,CACrCkB,GAAG,CAAC,OAAO,CACX,CAAC,CAEJ,CAAC,CAED,cAAe,CAAAxB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module"}