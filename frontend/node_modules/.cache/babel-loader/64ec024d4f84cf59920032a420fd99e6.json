{"ast":null,"code":"var _jsxFileName = \"/home/user/whaticket-free/frontend/src/components/TicketsList/index.js\";\nimport React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport openSocket from \"../../services/socket-io\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TicketListItem from \"../TicketListItem\";\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\nimport useTickets from \"../../hooks/useTickets\";\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nconst useStyles = makeStyles(theme => ({\n  ticketsListWrapper: {\n    position: \"relative\",\n    display: \"flex\",\n    height: \"100%\",\n    flexDirection: \"column\",\n    overflow: \"hidden\",\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0\n  },\n  ticketsList: {\n    flex: 1,\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n    borderTop: \"2px solid rgba(0, 0, 0, 0.12)\"\n  },\n  ticketsListHeader: {\n    color: \"rgb(67, 83, 105)\",\n    zIndex: 2,\n    backgroundColor: \"white\",\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  },\n  ticketsCount: {\n    fontWeight: \"normal\",\n    color: \"rgb(104, 121, 146)\",\n    marginLeft: \"8px\",\n    fontSize: \"14px\"\n  },\n  noTicketsText: {\n    textAlign: \"center\",\n    color: \"rgb(104, 121, 146)\",\n    fontSize: \"14px\",\n    lineHeight: \"1.4\"\n  },\n  noTicketsTitle: {\n    textAlign: \"center\",\n    fontSize: \"16px\",\n    fontWeight: \"600\",\n    margin: \"0px\"\n  },\n  noTicketsDiv: {\n    display: \"flex\",\n    height: \"100px\",\n    margin: 40,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_TICKETS\") {\n    const newTickets = action.payload;\n    newTickets.forEach(ticket => {\n      const ticketIndex = state.findIndex(t => t.id === ticket.id);\n      if (ticketIndex !== -1) {\n        state[ticketIndex] = ticket;\n        if (ticket.unreadMessages > 0) {\n          state.unshift(state.splice(ticketIndex, 1)[0]);\n        }\n      } else {\n        state.push(ticket);\n      }\n    });\n    return [...state];\n  }\n  if (action.type === \"RESET_UNREAD\") {\n    const ticketId = action.payload;\n    const ticketIndex = state.findIndex(t => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].unreadMessages = 0;\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_TICKET\") {\n    const ticket = action.payload;\n    const ticketIndex = state.findIndex(t => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n    } else {\n      state.unshift(ticket);\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\n    const ticket = action.payload;\n    const ticketIndex = state.findIndex(t => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n      state.unshift(state.splice(ticketIndex, 1)[0]);\n    } else {\n      state.unshift(ticket);\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_TICKET_CONTACT\") {\n    const contact = action.payload;\n    const ticketIndex = state.findIndex(t => t.contactId === contact.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].contact = contact;\n    }\n    return [...state];\n  }\n  if (action.type === \"DELETE_TICKET\") {\n    const ticketId = action.payload;\n    const ticketIndex = state.findIndex(t => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state.splice(ticketIndex, 1);\n    }\n    return [...state];\n  }\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\nconst TicketsList = props => {\n  const {\n    status,\n    searchParam,\n    showAll,\n    selectedQueueIds,\n    updateCount,\n    style,\n    tags\n  } = props;\n  const classes = useStyles();\n  const [pageNumber, setPageNumber] = useState(1);\n  const [ticketsList, dispatch] = useReducer(reducer, []);\n  const {\n    user\n  } = useContext(AuthContext);\n  const {\n    profile,\n    queues\n  } = user;\n  useEffect(() => {\n    dispatch({\n      type: \"RESET\"\n    });\n    setPageNumber(1);\n  }, [status, searchParam, dispatch, showAll, selectedQueueIds, tags]);\n  const {\n    tickets,\n    hasMore,\n    loading\n  } = useTickets({\n    pageNumber,\n    searchParam,\n    status,\n    showAll,\n    tags: JSON.stringify(tags),\n    queueIds: JSON.stringify(selectedQueueIds)\n  });\n  useEffect(() => {\n    const queueIds = queues.map(q => q.id);\n    const filteredTickets = tickets.filter(t => queueIds.indexOf(t.queueId) > -1);\n    if (profile === \"user\") {\n      dispatch({\n        type: \"LOAD_TICKETS\",\n        payload: filteredTickets\n      });\n    } else {\n      dispatch({\n        type: \"LOAD_TICKETS\",\n        payload: tickets\n      });\n    }\n  }, [tickets, status, searchParam, queues, profile]);\n  useEffect(() => {\n    const socket = openSocket();\n    const shouldUpdateTicket = ticket => (!ticket.userId || ticket.userId === (user === null || user === void 0 ? void 0 : user.id) || showAll) && (!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\n    const notBelongsToUserQueues = ticket => ticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\n    socket.on(\"ready\", () => {\n      if (status) {\n        socket.emit(\"joinTickets\", status);\n      } else {\n        socket.emit(\"joinNotification\");\n      }\n    });\n    socket.on(\"ticket\", data => {\n      if (data.action === \"updateUnread\") {\n        dispatch({\n          type: \"RESET_UNREAD\",\n          payload: data.ticketId\n        });\n      }\n      if (data.action === \"update\" && shouldUpdateTicket(data.ticket)) {\n        dispatch({\n          type: \"UPDATE_TICKET\",\n          payload: data.ticket\n        });\n      }\n      if (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\n        dispatch({\n          type: \"DELETE_TICKET\",\n          payload: data.ticket.id\n        });\n      }\n      if (data.action === \"delete\") {\n        dispatch({\n          type: \"DELETE_TICKET\",\n          payload: data.ticketId\n        });\n      }\n    });\n    socket.on(\"appMessage\", data => {\n      if (data.action === \"create\" && shouldUpdateTicket(data.ticket)) {\n        dispatch({\n          type: \"UPDATE_TICKET_UNREAD_MESSAGES\",\n          payload: data.ticket\n        });\n      }\n    });\n    socket.on(\"contact\", data => {\n      if (data.action === \"update\") {\n        dispatch({\n          type: \"UPDATE_TICKET_CONTACT\",\n          payload: data.contact\n        });\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [status, showAll, user, selectedQueueIds]);\n  useEffect(() => {\n    if (typeof updateCount === \"function\") {\n      updateCount(ticketsList.length);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ticketsList]);\n  const loadMore = () => {\n    setPageNumber(prevState => prevState + 1);\n  };\n  const handleScroll = e => {\n    if (!hasMore || loading) return;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight\n    } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n  return /*#__PURE__*/React.createElement(Paper, {\n    className: classes.ticketsListWrapper,\n    style: style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    square: true,\n    name: \"closed\",\n    elevation: 0,\n    className: classes.ticketsList,\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    style: {\n      paddingTop: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }\n  }, ticketsList.length === 0 && !loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.noTicketsDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.noTicketsTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 15\n    }\n  }, i18n.t(\"ticketsList.noTicketsTitle\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.noTicketsText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 15\n    }\n  }, i18n.t(\"ticketsList.noTicketsMessage\"))) : /*#__PURE__*/React.createElement(React.Fragment, null, ticketsList.map(ticket => /*#__PURE__*/React.createElement(TicketListItem, {\n    ticket: ticket,\n    key: ticket.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 17\n    }\n  }))), loading && /*#__PURE__*/React.createElement(TicketsListSkeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 23\n    }\n  }))));\n};\nexport default TicketsList;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","openSocket","makeStyles","List","Paper","TicketListItem","TicketsListSkeleton","useTickets","i18n","AuthContext","useStyles","theme","ticketsListWrapper","position","display","height","flexDirection","overflow","borderTopRightRadius","borderBottomRightRadius","ticketsList","flex","overflowY","scrollbarStyles","borderTop","ticketsListHeader","color","zIndex","backgroundColor","borderBottom","alignItems","justifyContent","ticketsCount","fontWeight","marginLeft","fontSize","noTicketsText","textAlign","lineHeight","noTicketsTitle","margin","noTicketsDiv","reducer","state","action","type","newTickets","payload","forEach","ticket","ticketIndex","findIndex","t","id","unreadMessages","unshift","splice","push","ticketId","contact","contactId","TicketsList","props","status","searchParam","showAll","selectedQueueIds","updateCount","style","tags","classes","pageNumber","setPageNumber","dispatch","user","profile","queues","tickets","hasMore","loading","JSON","stringify","queueIds","map","q","filteredTickets","filter","indexOf","queueId","socket","shouldUpdateTicket","userId","notBelongsToUserQueues","on","emit","data","disconnect","length","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","square","name","elevation","onScroll","paddingTop","Fragment","key"],"sources":["/home/user/whaticket-free/frontend/src/components/TicketsList/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport openSocket from \"../../services/socket-io\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport Paper from \"@material-ui/core/Paper\";\n\nimport TicketListItem from \"../TicketListItem\";\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\n\nimport useTickets from \"../../hooks/useTickets\";\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  ticketsListWrapper: {\n    position: \"relative\",\n    display: \"flex\",\n    height: \"100%\",\n    flexDirection: \"column\",\n    overflow: \"hidden\",\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n  },\n\n  ticketsList: {\n    flex: 1,\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n    borderTop: \"2px solid rgba(0, 0, 0, 0.12)\",\n  },\n\n  ticketsListHeader: {\n    color: \"rgb(67, 83, 105)\",\n    zIndex: 2,\n    backgroundColor: \"white\",\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n\n  ticketsCount: {\n    fontWeight: \"normal\",\n    color: \"rgb(104, 121, 146)\",\n    marginLeft: \"8px\",\n    fontSize: \"14px\",\n  },\n\n  noTicketsText: {\n    textAlign: \"center\",\n    color: \"rgb(104, 121, 146)\",\n    fontSize: \"14px\",\n    lineHeight: \"1.4\",\n  },\n\n  noTicketsTitle: {\n    textAlign: \"center\",\n    fontSize: \"16px\",\n    fontWeight: \"600\",\n    margin: \"0px\",\n  },\n\n  noTicketsDiv: {\n    display: \"flex\",\n    height: \"100px\",\n    margin: 40,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_TICKETS\") {\n    const newTickets = action.payload;\n\n    newTickets.forEach((ticket) => {\n      const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n      if (ticketIndex !== -1) {\n        state[ticketIndex] = ticket;\n        if (ticket.unreadMessages > 0) {\n          state.unshift(state.splice(ticketIndex, 1)[0]);\n        }\n      } else {\n        state.push(ticket);\n      }\n    });\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET_UNREAD\") {\n    const ticketId = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].unreadMessages = 0;\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET\") {\n    const ticket = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n    } else {\n      state.unshift(ticket);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\n    const ticket = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n      state.unshift(state.splice(ticketIndex, 1)[0]);\n    } else {\n      state.unshift(ticket);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET_CONTACT\") {\n    const contact = action.payload;\n    const ticketIndex = state.findIndex((t) => t.contactId === contact.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].contact = contact;\n    }\n    return [...state];\n  }\n\n  if (action.type === \"DELETE_TICKET\") {\n    const ticketId = action.payload;\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state.splice(ticketIndex, 1);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst TicketsList = (props) => {\n  const {\n    status,\n    searchParam,\n    showAll,\n    selectedQueueIds,\n    updateCount,\n    style,\n    tags,\n  } = props;\n  const classes = useStyles();\n  const [pageNumber, setPageNumber] = useState(1);\n  const [ticketsList, dispatch] = useReducer(reducer, []);\n  const { user } = useContext(AuthContext);\n\tconst { profile, queues } = user;\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [status, searchParam, dispatch, showAll, selectedQueueIds, tags]);\n\n  const { tickets, hasMore, loading } = useTickets({\n    pageNumber,\n    searchParam,\n    status,\n    showAll,\n    tags: JSON.stringify(tags),\n    queueIds: JSON.stringify(selectedQueueIds),\n  });\n\n\tuseEffect(() => {\n\t\tconst queueIds = queues.map((q) => q.id);\n\t\tconst filteredTickets = tickets.filter((t) => queueIds.indexOf(t.queueId) > -1);\n\n\t\tif (profile === \"user\") {\n\t\t\tdispatch({ type: \"LOAD_TICKETS\", payload: filteredTickets });\n\t\t} else {\n\t\t\tdispatch({ type: \"LOAD_TICKETS\", payload: tickets });\n\t\t}\n\t}, [tickets, status, searchParam, queues, profile]);\n\n  useEffect(() => {\n    const socket = openSocket();\n\n    const shouldUpdateTicket = (ticket) =>\n      (!ticket.userId || ticket.userId === user?.id || showAll) &&\n      (!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\n\n    const notBelongsToUserQueues = (ticket) =>\n      ticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\n\n    socket.on(\"ready\", () => {\n      if (status) {\n        socket.emit(\"joinTickets\", status);\n      } else {\n        socket.emit(\"joinNotification\");\n      }\n    });\n\n    socket.on(\"ticket\", (data) => {\n      if (data.action === \"updateUnread\") {\n        dispatch({\n          type: \"RESET_UNREAD\",\n          payload: data.ticketId,\n        });\n      }\n\n      if (data.action === \"update\" && shouldUpdateTicket(data.ticket)) {\n        dispatch({\n          type: \"UPDATE_TICKET\",\n          payload: data.ticket,\n        });\n      }\n\n      if (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticket.id });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticketId });\n      }\n    });\n\n    socket.on(\"appMessage\", (data) => {\n      if (data.action === \"create\" && shouldUpdateTicket(data.ticket)) {\n        dispatch({\n          type: \"UPDATE_TICKET_UNREAD_MESSAGES\",\n          payload: data.ticket,\n        });\n      }\n    });\n\n    socket.on(\"contact\", (data) => {\n      if (data.action === \"update\") {\n        dispatch({\n          type: \"UPDATE_TICKET_CONTACT\",\n          payload: data.contact,\n        });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [status, showAll, user, selectedQueueIds]);\n\n  useEffect(() => {\n    if (typeof updateCount === \"function\") {\n      updateCount(ticketsList.length);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ticketsList]);\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  return (\n    <Paper className={classes.ticketsListWrapper} style={style}>\n      <Paper\n        square\n        name=\"closed\"\n        elevation={0}\n        className={classes.ticketsList}\n        onScroll={handleScroll}\n      >\n        <List style={{ paddingTop: 0 }}>\n          {ticketsList.length === 0 && !loading ? (\n            <div className={classes.noTicketsDiv}>\n              <span className={classes.noTicketsTitle}>\n                {i18n.t(\"ticketsList.noTicketsTitle\")}\n              </span>\n              <p className={classes.noTicketsText}>\n                {i18n.t(\"ticketsList.noTicketsMessage\")}\n              </p>\n            </div>\n          ) : (\n            <>\n              {ticketsList.map((ticket) => (\n                <TicketListItem ticket={ticket} key={ticket.id} />\n              ))}\n            </>\n          )}\n          {loading && <TicketsListSkeleton />}\n        </List>\n      </Paper>\n    </Paper>\n  );\n};\n\nexport default TicketsList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}